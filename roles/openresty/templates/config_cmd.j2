#!/bin/bash
mkdir /var/lib/nginx
./configure \
--pid-path=/var/run/nginx.pid \
--lock-path=/var/lock/nginx.lock \
--error-log-path=/var/log/nginx/error.log \
{% if with_luajit %} --with-luajit {% endif %}
{% if with_dav %} --with-http_dav_module {% endif %}
{% if with_flv %} --with-http_flv_module {% endif %}
{% if with_geoip %} --with-http_geoip_module {% endif %}
{% if with_gzip_static %} --with-http_gzip_static_module {% endif %}
{% if with_image_filter %} --with-http_image_filter_module {% endif %}
{% if with_realip %} --with-http_realip_module {% endif %}
{% if with_stub_status %} --with-http_stub_status_module {% endif %}
{% if with_ssl %} --with-http_ssl_module {% endif %}
{% if with_sub %} --with-http_sub_module {% endif %}
{% if with_xslt %} --with-http_xslt_module {% endif %}
{% if with_ipv6 %} --with-ipv6 {% endif %}
{% if with_mail %} --with-mail {% endif %}
{% if with_mail_ssl %} --with-mail_ssl_module {% endif %}
{% if with_secure_link %} --with-http_secure_link_module {% endif %}
{% if with_sha1 %} --with-sha1={{ with_sha1 }} {% endif %}
{% if with_md5 %} --with-md5={{ with_md5 }} {% endif %}
{% if with_pcre %} --with-pcre {% endif %}
{% if with_pcre_jit %} --with-pcre-jit {% endif %}
{% if with_debug %} --with-debug {% endif %}
{% if with_auth_request %} --with-http_auth_request_module {% endif %}
{% if with_addition %} --with-http_addition_module {% endif %}
{% if with_gunzip %} --with-http_gunzip_module {% endif %}
{% if with_postgres %} --with-http_postgres_module {% endif %}
{% if without_http_echo %} --without-http_echo_module {% endif %}
{% if without_http_xss %} --without-http_xss_module {% endif %}
{% if without_http_coolkit %} --without-http_coolkit_module {% endif %}
{% if without_http_set_misc %} --without-http_set_misc_module {% endif %}
{% if without_http_form_input %} --without-http_form_input_module {% endif %}
{% if without_http_encrypted_session %} --without-http_encrypted_session_module {% endif %}
{% if without_http_srcache %} --without-http_srcache_module {% endif %}
{% if without_http_lua %} --without-http_lua_module {% endif %}
{% if without_http_lua_upstream %} --without-http_lua_upstream_module {% endif %}
{% if without_http_headers_more %} --without-http_headers_more_module {% endif %}
{% if without_http_array_var %} --without-http_array_var_module {% endif %}
{% if without_http_memc %} --without-http_memc_module {% endif %}
{% if without_http_redis2 %} --without-http_redis2_module {% endif %}
{% if without_http_redis %} --without-http_redis_module {% endif %}
{% if without_http_rds_json %} --without-http_rds_json_module {% endif %}
{% if without_http_rds_csv %} --without-http_rds_csv_module {% endif %}
{% if without_stream_lua %} --without-stream_lua_module {% endif %}
{% if without_ngx_devel_kit %} --without-ngx_devel_kit_module {% endif %}
{% if without_http_gzip %} --without-http_gzip_module {% endif %}
--http-client-body-temp-path=/var/lib/nginx/body \
--http-fastcgi-temp-path=/var/lib/nginx/fastcgi \
--http-log-path=/var/log/nginx/access.log \
--http-proxy-temp-path=/var/lib/nginx/proxy \
--http-scgi-temp-path=/var/lib/nginx/scgi \
--http-uwsgi-temp-path=/var/lib/nginx/uwsgi
